# Claude対話型メニュー生成ガイド

## 📋 目次

1. [概要](#概要)
2. [生成フロー（2段階方式）](#生成フロー2段階方式)
3. [ステップ1：鑑定文生成依頼JSONの作成](#ステップ1鑑定文生成依頼jsonの作成)
4. [ステップ2：Claudeによる鑑定文生成](#ステップ2claudeによる鑑定文生成)
5. [ステップ3：SQLファイルの生成](#ステップ3sqlファイルの生成)
6. [魅力的なタイトル作成ガイドライン](#魅力的なタイトル作成ガイドライン)
7. [鑑定文の品質基準](#鑑定文の品質基準)
8. [カード情報の活用方法](#カード情報の活用方法)
9. [チェックリスト](#チェックリスト)

---

## 概要

### 従来の問題点

- **定型文方式の限界**: テンプレートにキーワードを当てはめるだけで、意味不明な文章になる
- **カード情報の未活用**: カードの「キーワード」「概要」を全く使用していない
- **漠然とした結論**: 占いテーマに対して具体的な答えがない

### Claude対話型の特徴

✅ **定型文を一切使用しない**
✅ **カード情報（名称・キーワード・概要）を具体的に活用**
✅ **占い項目に対して明確な結論を提示**
✅ **300文字以上の充実した内容**
✅ **メニュー内容を反映した魅力的なタイトル**

---

## 生成フロー（2段階方式）

```
[ステップ1] Python スクリプト実行
    ↓
鑑定文生成依頼JSON作成
    ↓
[ステップ2] Claude が鑑定文を生成
    ↓
鑑定文入りJSONを保存
    ↓
[ステップ3] Python スクリプト実行
    ↓
SQLファイル生成完了
```

---

## ステップ1：鑑定文生成依頼JSONの作成

### コマンド

```bash
python generate_truly_unique_menus.py --request <start_id> <end_id>
```

### 例：メニューID 1043を1つ生成

```bash
python generate_truly_unique_menus.py --request 1043 1043
```

### 例：メニューID 1043-1047を5つ生成

```bash
python generate_truly_unique_menus.py --request 1043 1047
```

### 生成されるファイル

`reading_requests_1043_1043.json`（または範囲指定の場合は `reading_requests_1043_1047.json`）

### JSON構造

```json
[
  {
    "contents_id": 1043,
    "category_id": 1,
    "num_items": 8,
    "readings": [
      {
        "contents_id": 1043,
        "item_index": 1,
        "pattern_num": 1,
        "item_name": "二人の絆を深めるために大切なこと",
        "card_id": 8,
        "card_name": "LONO/KAMAPUA'A",
        "card_keyword": "収穫/豊穣",
        "card_summary": "やり切ることで収穫に繋がる",
        "category_id": 1,
        "placeholder": "__READING__1043_1_1__",
        "reading_text": ""
      }
      // ... 他の鑑定文（合計32個）
    ]
  }
]
```

---

## ステップ2：Claudeによる鑑定文生成

### 手順

1. **JSONファイルをClaudeに提供**

   ```
   reading_requests_1043_1043.json を読み込んで、各鑑定文の "reading_text" を埋めてください
   ```

2. **Claudeが各項目に対して鑑定文を生成**

   - カードの「キーワード」と「概要」を具体的に活用
   - 占い項目（item_name）に対する明確な答え
   - 300文字以上の充実した内容
   - 定型文は一切使用しない

3. **魅力的なタイトルも同時に生成**

   生成されたJSONに以下を追加：

   ```json
   {
     "contents_id": 1043,
     "category_id": 1,
     "num_items": 8,
     "menu_name": "あの人の本音と二人が辿る運命◆8つの真実",
     "catch": "秘めた想いから未来まで完全解明",
     "caption": "相手は今あなたに何を感じている？　二人の関係はこれからどうなる？　秘められた想いと未来の展開を、ハワイアンタロットが8つの視点から徹底的に占います。",
     "readings": [ ... ]
   }
   ```

4. **完成したJSONを保存**

   `readings_filled_1043_1043.json` として保存

---

## ステップ3：SQLファイルの生成

### コマンド

```bash
python generate_truly_unique_menus.py --generate readings_filled_1043_1043.json
```

### 生成されるファイル

`menu_1043.sql`

### 確認ポイント

- ✅ mana_contents テーブルの name, catch, caption が魅力的
- ✅ mana_result テーブルの body が具体的で充実している
- ✅ カード名がテキストに含まれている
- ✅ 鑑定文が300文字以上

---

## 魅力的なタイトル作成ガイドライン

### name（メニュー名）の要素

1. **具体性**: 項目数を必ず明示する
   - **重要**: 数の後に続く言葉は多様化すること
   - バリエーション例：
     - 「◆8つの秘密」「10個の答え」「5つのメッセージ」
     - 「7の道しるべ」「6つの鍵」「4つの扉」
     - 「9つのヒント」「3つのサイン」「8の啓示」
   - **避けるべき**: 毎回「◯つの真実」など同じ表現の繰り返し

2. **ユーザーの関心**: 核心的な悩みに直結
   例：「あの人の本音」「運命の行方」「秘められた想い」

3. **視覚的アクセント**: 記号を効果的に使用
   例：「◆」「※」「【】」

4. **カテゴリーに応じた表現**:
   - **両思い**: 「二人の未来」「絆を深める」「関係の進展」
   - **片思い**: 「恋の成就」「想いの実現」「距離を縮める」
   - **相手の気持ち**: 「本音」「真意」「隠れた感情」
   - **不倫**: 「禁断の恋」「運命の選択」「関係の行方」
   - **結婚**: 「結婚運」「生涯のパートナー」「幸せな未来」
   - **復縁**: 「やり直しの可能性」「もう一度の愛」「縁の再生」

### catch（キャッチフレーズ）の要素

**【重要】50文字以内でメニュー内容を表し、ユーザーの興味を引くキャッチーな表現を使用する**

1. **文字数制限**
   - ✅ **50文字以内**（必須）
   - メニューの項目数を含めると具体性が増す

2. **キャッチーな表現パターン**
   - ✅ **疑問形**: 「全部知りたくない？」「続ける？終わる？」
   - ✅ **行動喚起型**: 「今すぐ使える！」「今日から始めて」
   - ✅ **数字を含める**: 「8つの本音」「6つの秘策」「4つの方法」
   - ✅ **直接的な問いかけ**: 「転職？現職？」「結婚前に知りたい」

3. **避けるべき堅苦しい表現**
   - ❌ 「～を占う」「～を鑑定」「～を解明」「徹底鑑定」
   - ❌ 新聞調の硬い表現
   - ❌ 抽象的で漠然とした表現

4. **推奨する柔らかい表現**
   - ✅ 「二人で築く」「幸せな」「育て方」
   - ✅ 「乗り越える」「寄り添う」「見つける」
   - ✅ 前向きで寄り添う感じのフレーズ

5. **文体のトーン**
   - 女性雑誌のような親しみやすさ
   - 読者に寄り添う優しい語り口
   - ポジティブで希望が持てる表現

### 良い例

```
name: "あの人の本音と二人が辿る運命◆8つの秘密"
catch: "あの人の8つの本音、全部知りたくない？"
```

```
name: "片想いの行方と恋の成就◆6つの答え"
catch: "今すぐ使える！両想いへの6つの秘策"
```

```
name: "【7つの扉】結婚後の変化と幸せの羅針盤"
catch: "結婚前に知りたい7つの本当のこと"
```

```
name: "仕事の転機と才能を活かす◆8つの扉"
catch: "転職？現職？答えが見つかる8つの扉"
```

```
name: "この関係の行方と決断◆4つの答え"
catch: "この関係、続ける？終わる？4つの答え"
```

### 悪い例（避けるべき）

```
name: "二人の関係を深く占う"  ← 一般的すぎる
catch: "結婚後の変化と障害の克服を占う"  ← 堅苦しい・新聞調
```

```
name: "相手の気持ちを知る"
catch: "相手の本音を徹底鑑定"  ← 「鑑定」「解明」が堅い
```

```
catch: "秘めた想いから未来まで完全解明"  ← ❌ 堅い・キャッチーさがない
catch: "徹底鑑定！全真相公開中"          ← ❌ 「鑑定」は避ける
catch: "仕事の迷いに寄り添い道を照らす"  ← ❌ 漠然としている
```

```
name: "◆8つの真実で占う相手の気持ち"  ← ❌ NG
name: "◆5つの真実で見る恋の行方"     ← ❌ NG
name: "◆10の真実を明かす"            ← ❌ NG
※ 毎回「◯つの真実」では機械的で魅力に欠ける
```

---

## 鑑定文の品質基準

### 必須要素

1. **カード情報の明示**
   ```
   ハワイアンタロットに現れたのは【LONO/KAMAPUA'A】のカードです。
   ```

2. **キーワードの具体的な活用**
   ```
   このカードが示す「収穫」と「やり切る」というメッセージは、二人の絆を深めるために極めて重要な意味を持ちます。
   ```

3. **カード概要の解釈**
   ```
   やり切ることで収穫に繋がる → 一度決めたことを最後までやり遂げる姿勢が重要
   ```

4. **占い項目への明確な答え**
   ```
   項目：「二人の絆を深めるために大切なこと」
   答え：「一度決めたことを最後までやり遂げる姿勢」「約束を守る」「誠実な態度」
   ```

5. **具体的なアドバイス**
   ```
   デートの約束を守る、連絡を欠かさない、相手の話を最後まで聞くといった日々の小さな約束事を確実に実行してください。
   ```

6. **文字数**
   300文字以上（理想は350-450文字）

### 避けるべき表現

❌ **定型文っぽい表現**
```
「あなたの未来は明るく、可能性に満ちています。自分を信じ、一歩ずつ着実に進んでいきましょう。」
```
→ どのカードにも当てはまる漠然とした内容

❌ **キーワードを単に並べただけ**
```
「このカードは【収穫】を示しています。収穫の時期が来ています。」
```
→ 具体的な解釈がない

❌ **占い項目と無関係な内容**
```
項目：「相手の気持ち」
内容：「あなたは成長する必要があります。」
```
→ 質問に答えていない

---

## カード情報の活用方法

### card_name.csv の構造

| カードID | 名称 | キーワード | 概要 |
|---------|------|-----------|------|
| 8 | LONO/KAMAPUA'A | 収穫/豊穣 | やり切ることで収穫に繋がる |
| 35 | MAUI | トリックスター | 失敗を恐れずチャレンジする |

### 活用例

#### カード8：LONO/KAMAPUA'A

**キーワード**: 収穫/豊穣
**概要**: やり切ることで収穫に繋がる

**解釈の展開**:
1. 「やり切る」→ 中途半端にしない、最後まで完遂する
2. 「収穫」→ 努力が実る、豊かな成果を得る
3. 恋愛への適用 → 約束を守る、誠実な姿勢、信頼の構築

**鑑定文の構成**:
```
1. カード名の提示
2. キーワードと概要の紹介
3. 占い項目との関連付け
4. 具体的なアドバイス
5. 前向きな締めくくり
```

#### カード35：MAUI

**キーワード**: トリックスター
**概要**: 失敗を恐れずチャレンジする

**解釈の展開**:
1. 「失敗を恐れず」→ 勇気を持つ、リスクを取る
2. 「チャレンジ」→ 新しいことに挑戦する、変化を受け入れる
3. 恋愛への適用 → マンネリ打破、新しい体験、本音を伝える勇気

---

## チェックリスト

### ステップ1完了時

- [ ] `reading_requests_[ID].json` ファイルが生成された
- [ ] JSONに正しい項目数の鑑定文依頼が含まれている
- [ ] 各項目に card_name, card_keyword, card_summary が含まれている

### ステップ2完了時

- [ ] 全ての reading_text が埋まっている（空欄がない）
- [ ] menu_name, catch, caption が追加されている
- [ ] menu_name がメニュー内容を反映している
- [ ] **catch が50文字以内**
- [ ] catch が魅力的でキャッチー（疑問形・行動喚起・数字含む）
- [ ] 各鑑定文が300文字以上
- [ ] カード情報（名称・キーワード・概要）が活用されている
- [ ] 占い項目に対する明確な答えがある
- [ ] 定型文っぽい表現がない

### ステップ3完了時

- [ ] `menu_[ID].sql` ファイルが生成された
- [ ] mana_contents の name, catch, caption が正しい
- [ ] mana_menu の項目名が適切
- [ ] mana_result の body に具体的な鑑定文が入っている
- [ ] SQLファイルの内容を確認し、問題がない

---

## 実例：menu_1043.sql

### 優れている点

✅ **魅力的なタイトル**
```sql
name: 'あの人の本音と二人が辿る運命◆8つの真実'
catch: '秘めた想いから未来まで完全解明'
```

✅ **カード情報の活用**
```
ハワイアンタロットに現れたのは【LONO/KAMAPUA'A】のカードです。
このカードが示す「収穫」と「やり切る」というメッセージは、
二人の絆を深めるために極めて重要な意味を持ちます。
```

✅ **具体的なアドバイス**
```
デートの約束を守る、連絡を欠かさない、相手の話を最後まで聞くといった
日々の小さな約束事を確実に実行してください。
```

✅ **占い項目への明確な答え**
```
項目：「二人の絆を深めるために大切なこと」
答え：「一度決めたことを最後までやり遂げる姿勢」
```

✅ **充実した文字数**
各鑑定文が350-450文字で構成されている

---

## よくある質問

### Q1: 鑑定文の長さはどのくらいが適切？

**A**: 300文字以上、理想は350-450文字です。短すぎると内容が薄くなり、長すぎると読みにくくなります。

### Q2: カードのキーワードが抽象的な場合はどうする？

**A**: カードの「概要」を参考に具体的な解釈を展開してください。例：
- 「トリックスター」→「失敗を恐れずチャレンジする」→「新しいことに挑戦する勇気」

### Q3: 同じ項目名が複数ある場合は？

**A**: 各パターンで異なるカードが割り当てられているため、カードの特性に応じて異なる角度からアドバイスを提供します。

### Q4: captionはどの程度詳しく書くべき？

**A**: 2-3文程度で、メニュー内容の核心を伝えます。疑問形を使うとユーザーの共感を得やすくなります。

### Q5: 複数のメニューを一度に生成できる？

**A**: はい。`--request 1043 1050` のように範囲指定すれば、一度に複数のメニューの依頼JSONを作成できます。

---

## まとめ

### Claude対話型メニュー生成の利点

1. **高品質**: 定型文を使わず、具体的で充実した鑑定文
2. **柔軟性**: カード情報と項目内容に応じた最適な文章
3. **魅力的**: メニュー内容を反映したキャッチーなタイトル
4. **効率性**: 2段階方式で大量生成も可能

### 成功の鍵

- カード情報（名称・キーワード・概要）を必ず活用する
- 占い項目に対して明確な答えを提示する
- 定型文は一切使わない
- メニュー内容を反映した魅力的なタイトルを作成する

---

**作成日**: 2025-11-13
**バージョン**: 1.0
**対応スクリプト**: generate_truly_unique_menus.py
